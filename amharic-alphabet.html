<!DOCTYPE html>
<html lang="am">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>·ä†·àõ·à≠·äõ ·çä·ã∞·àç Fun</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic&display=swap" rel="stylesheet">
<style>
:root{
  --accent:#ff6f61; --accent2:#ffa500; --bg:#f0f8ff; --card:#fff; --muted:#555;
  --success:#28a745; --fail:#dc3545;
}
body{margin:0;font-family:"Noto Sans Ethiopic",sans-serif;background:var(--bg);color:#222;}
header{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;padding:14px 12px;position:sticky;top:0;z-index:50;}
.top-row{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;max-width:1200px;margin:0 auto;}
nav{display:flex;gap:8px;flex-wrap:wrap;}
nav button{background:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;color:var(--accent);}
nav button.active{background:rgba(255,255,255,0.2);color:#fff;}
.toggles{display:flex;gap:8px;}
.toggles button{background:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;}
main{max-width:1200px;margin:18px auto;padding:0 12px;}
.section{display:none;}
.section.active{display:block;}
.letters-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
.card{background:var(--card);border-radius:14px;padding:12px;box-shadow:0 6px 12px rgba(0,0,0,0.06);text-align:center;transition:transform .18s;cursor:default;}
.card:hover{transform:translateY(-4px);}
.base-letter{font-size:44px;font-weight:700;color:var(--accent);}
.orders{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:6px}
.order{background:#f6f0ff;padding:6px 8px;border-radius:8px;cursor:pointer;border:1px solid rgba(255,111,97,0.3);}
.word{margin-top:8px;font-weight:700;color:#333;cursor:pointer;}
.sentence{font-size:14px;color:var(--muted);margin-top:6px;}
.high-contrast{background:#000;color:#ffeb3b}
.large-text{font-size:1.25rem}
canvas#effectsCanvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1200}
.game-container{margin-top:16px;text-align:center;}
.game-btn{padding:10px 14px;border-radius:10px;background:var(--accent);color:#fff;font-weight:700;margin:6px;cursor:pointer;}
.option-btn{padding:10px 14px;border-radius:10px;border:2px solid var(--accent2);cursor:pointer;min-width:110px;margin:4px;}
.option-btn.correct{background:var(--success);color:#fff;border-color:var(--success);}
.option-btn.wrong{background:var(--fail);border-color:var(--fail);color:#fff;}
.emoji-feedback{font-size:2rem;animation: bounce 0.6s;}
@keyframes bounce{0%{transform:scale(1)}50%{transform:scale(1.5)}100%{transform:scale(1)}}

/* --- Memory Game Styles --- */
.memory-game-board {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 15px;
  max-width: 600px;
  margin: 20px auto;
  perspective: 1000px;
}
.memory-card {
  background-color: transparent;
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s;
}
.memory-card.flipped {
  transform: rotateY(180deg);
}
.memory-card .front-face,
.memory-card .back-face {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  backface-visibility: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 3rem;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.memory-card .front-face {
  background: linear-gradient(45deg, var(--accent), var(--accent2));
  color: white;
}
.memory-card .front-face::after {
  content: '?';
  font-size: 4rem;
}
.memory-card .back-face {
  background-color: var(--card);
  color: var(--accent);
  transform: rotateY(180deg);
}
/* --- Word Pop-up Styles --- */
#word-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--success);
  color: white;
  padding: 30px 50px;
  border-radius: 25px;
  font-size: 4rem;
  font-weight: 700;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  z-index: 2000;
  animation: popup-animation 0.5s ease-out forwards;
  pointer-events: none;
}
#word-popup.hidden {
  display: none;
}
@keyframes popup-animation {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}
</style>
</head>
<body>

<header>
  <div class="top-row">
    <div class="brand">üéâ ·ä†·àõ·à≠·äõ ·çä·ã∞·àç Fun</div>
    <nav>
      <button data-section="letters" class="active">Letters</button>
      <button data-section="mini">Mini Games</button>
      <button data-section="quiz">Quiz</button>
    </nav>
    <div class="toggles">
      <button id="contrastBtn">üåì Contrast</button>
      <button id="textBtn">üî† Large Text</button>
    </div>
  </div>
</header>

<main>
  <section id="letters" class="section active">
    <h2>üìö Letters & Words</h2>
    <div class="letters-grid" id="lettersGrid"></div>
  </section>

  <section id="mini" class="section">
    <h2>üéÆ Mini Games</h2>
    <div class="game-container">
      <button class="game-btn" onclick="startMatchingGame()">üß† Memory Match</button>
      <button class="game-btn" onclick="startTraceGame()">‚úçÔ∏è Trace Letter</button>
      <div id="gameArea"></div>
    </div>
  </section>

  <section id="quiz" class="section">
    <h2>üéØ Quiz</h2>
    <div id="quizArea"></div>
    <div id="emojiFeedback" class="emoji-feedback"></div>
    <p>Score: <span id="score">0</span></p>
  </section>
</main>

<canvas id="effectsCanvas"></canvas>
<div id="word-popup" class="hidden"></div>

<script>
// ---------------- Letters Data ----------------
const lettersData=[{base:"·àÄ",orders:["·àÄ","·àÅ","·àÇ","·àÉ","·àÑ","·àÖ","·àÜ"],word:"·àÄ·â•·âµ",sentence:"·àÄ·â•·âµ ·â†·à•·à´ ·ã≠·àò·å£·àç"},{base:"·àà",orders:["·àà","·àâ","·àä","·àã","·àå","·àç","·àé"],word:"·àé·àö",sentence:"·àé·àö ·åé·àù·ãõ·ãõ ·äê·ãç"},{base:"·àê",orders:["·àê","·àë","·àí","·àì","·àî","·àï","·àñ"],word:"·àê·ä™·àù",sentence:"·àê·ä™·àô ·â≥·ä´·àö·ãç·äï ·ã≠·à®·ã≥·àç"},{base:"·àò",orders:["·àò","·àô","·àö","·àõ","·àú","·àù","·àû"],word:"·àò·ä™·äì",sentence:"·àò·ä™·äì·ãç ·â†·çç·å•·äê·âµ ·ã≠·åì·ãõ·àç"},{base:"·à†",orders:["·à†","·à°","·à¢","·à£","·à§","·à•","·à¶"],word:"·à†·àã·àù",sentence:"·à†·àã·àù ·àà·àÅ·àâ·àù"},{base:"·à®",orders:["·à®","·à©","·à™","·à´","·à¨","·à≠","·àÆ"],word:"·à¨·ã≤·ãÆ",sentence:"·à¨·ã≤·ãÆ ·àô·ãö·âÉ ·ã´·å´·ãç·â≥·àç"},{base:"·à∞",orders:["·à∞","·à±","·à≤","·à≥","·à¥","·àµ","·à∂"],word:"·à∞·ãì·âµ",sentence:"·à∞·ãì·â± ·âµ·ä≠·ä≠·àà·äõ ·äê·ãç"},{base:"·à∏",orders:["·à∏","·àπ","·à∫","·àª","·àº","·àΩ","·àæ"],word:"·à∏·àö·ãù",sentence:"·à∏·àö·ãô ·äï·åπ·àÖ ·äê·ãç"},{base:"·âÄ",orders:["·âÄ","·âÅ","·âÇ","·âÉ","·âÑ","·âÖ","·âÜ"],word:"·âÄ·àà·àù",sentence:"·âÄ·àà·àô ·ã∞·àõ·âÖ ·äê·ãç"},{base:"·â†",orders:["·â†","·â°","·â¢","·â£","·â§","·â•","·â¶"],word:"·â†·à≠",sentence:"·â†·à© ·â∞·ä®·çç·â∑·àç"},{base:"·â∞",orders:["·â∞","·â±","·â≤","·â≥","·â¥","·âµ","·â∂"],word:"·â∞·à´·à´",sentence:"·â∞·à´·à´·ãç ·ä®·çç ·ã´·àà ·äê·ãç"},{base:"·â∏",orders:["·â∏","·âπ","·â∫","·âª","·âº","·âΩ","·âæ"],word:"·â∏·äÆ·àå·âµ",sentence:"·â∏·äÆ·àå·âµ ·å£·çã·å≠ ·äê·ãç"},{base:"·äÄ",orders:["·äÄ","·äÅ","·äÇ","·äÉ","·äÑ","·äÖ","·äÜ"],word:"·äÄ·ã≠·àç",sentence:"·äÄ·ã≠·àç ·ã´·àµ·çà·àç·åã·àç"},{base:"·äê",orders:["·äê","·äë","·äí","·äì","·äî","·äï","·äñ"],word:"·äê·â•·à≠",sentence:"·äê·â•·à≠ ·çà·å£·äï ·äê·ãç"},{base:"·äò",orders:["·äò","·äô","·äö","·äõ","·äú","·äù","·äû"],word:"·äò·àã·àµ·â∞·à≠",sentence:"·äò·àã·àµ·â∞·à≠ ·âÅ·àµ·àç·äï ·ã≠·à∏·çç·äì·àç"},{base:"·ä†",orders:["·ä†","·ä°","·ä¢","·ä£","·ä§","·ä•","·ä¶"],word:"·ä†·äï·â†·à≥",sentence:"·ä†·äï·â†·à≥ ·ã®·å´·ä´ ·äï·åâ·à• ·äê·ãç"},{base:"·ä®",orders:["·ä®","·ä©","·ä™","·ä´","·ä¨","·ä≠","·äÆ"],word:"◊õ◊ï◊ë◊¢",sentence:"·äÆ·ä®·â• ·â†·à∞·àõ·ã≠ ·àã·ã≠ ·ã´·â†·à´·àç"},{base:"·ä∏",orders:["·ä∏","·äπ","·ä∫","·äª","·äº","·äΩ","·äæ"],word:"·ä∏·àö·àµ",sentence:"·ä∏·àö·àµ ·ã®·à≥·àù·äï·â± ·âÄ·äï ·äê·ãç"},{base:"·ãà",orders:["·ãà","·ãâ","·ãä","·ãã","·ãå","·ãç","·ãé"],word:"·ãà·äï·â†·à≠",sentence:"·ãà·äï·â†·à© ·àù·âπ ·äê·ãç"},{base:"·ãê",orders:["·ãê","·ãë","·ãí","·ãì","·ãî","·ãï","·ãñ"],word:"·ãê·ã≠",sentence:"·ãì·à£ ·â†·ãç·àÉ ·ãç·àµ·å• ·ã≠·ãã·äõ·àç"},{base:"·ãò",orders:["·ãò","·ãô","·ãö","·ãõ","·ãú","·ãù","·ãû"],word:"·ãò·ã≠·âµ",sentence:"·ãò·ã≠·âµ ·àà·àù·åç·â• ·àõ·â•·à∞·ã´ ·ã´·åà·àà·åç·àã·àç"},{base:"·ã†",orders:["·ã†","·ã°","·ã¢","·ã£","·ã§","·ã•","·ã¶"],word:"·ã†ÿ±ÿßŸÅ",sentence:"·âÄ·å≠·äî ·à®·åÖ·àù ·ä†·äï·åà·âµ ·ä†·àã·âµ"},{base:"·ã®",orders:["·ã®","·ã©","·ã™","·ã´","·ã¨","·ã≠","·ãÆ"],word:"·ã®·åà·äì ·ãõ·çç",sentence:"·ã®·åà·äì ·ãõ·çç ·â†·â†·ãì·àç ·åä·ãú ·ã´·åå·å£·àç"},{base:"·ã∞",orders:["·ã∞","·ã±","·ã≤","·ã≥","·ã¥","·ãµ","·ã∂"],word:"·ã∞·â•·â∞·à≠",sentence:"·ã∞·â•·â∞·à© ·àà·àò·åª·çç ·äê·ãç"},{base:"·åÄ",orders:["·åÄ","·åÅ","·åÇ","·åÉ","·åÑ","·åÖ","·åÜ"],word:"·åÄ·àç·â£",sentence:"·åÄ·àç·â£·ãç ·â†·ãç·àÉ ·àã·ã≠ ·ã≠·åì·ãõ·àç"},{base:"·åà",orders:["·åà","·åâ","·åä","·åã","·åå","·åç","·åé"],word:"·åà·â†·â≥",sentence:"·åà·â†·â≥·ãç ·â†·àù·åç·â• ·ã®·â∞·àû·àã ·äê·ãç"},{base:"·å†",orders:["·å†","·å°","·å¢","·å£","·å§","·å•","·å¶"],word:"·å†·à®·å¥·ãõ",sentence:"·å†·à®·å¥·ãõ·ãç ·àã·ã≠ ·àò·åª·àï·çç·âµ ·ä†·àâ"},{base:"·å®",orders:["·å®","·å©","·å™","·å´","·å¨","·å≠","·åÆ"],word:"·å®·à®·âÉ",sentence:"·å®·à®·âÉ ·â†·àå·àä·âµ ·â≥·â†·à´·àà·âΩ"},{base:"·å∞",orders:["·å∞","·å±","·å≤","·å≥","·å¥","·åµ","·å∂"],word:"·å∞·å≥",sentence:"·å≥·å≥·à± ·å∏·àé·âµ ·ã≠·àò·à´·àâ"},{base:"·å∏",orders:["·å∏","·åπ","·å∫","·åª","·åº","·åΩ","·åæ"],word:"·å∏·àé·âµ",sentence:"·å∏·àé·âµ ·à∞·àã·àù·äï ·ã´·àò·å£·àç"},{base:"·çÄ",orders:["·çÄ","·çÅ","·çÇ","·çÉ","·çÑ","·çÖ","·çÜ"],word:"·çÄ·àê·ã≠",sentence:"·çÄ·àê·ã≠ ·â•·à≠·àÉ·äï ·âµ·à∞·å£·àà·âΩ"},{base:"·çà",orders:["·çà","·çâ","·çä","·çã","·çå","·çç","·çé"],word:"·çà·à®·àµ",sentence:"·çà·à®·àµ ·â†·çç·å•·äê·âµ ·ã≠·àÆ·å£·àç"},{base:"·çê",orders:["·çê","·çë","·çí","·çì","·çî","·çï","·çñ"],word:"·çí·ã´·äñ",sentence:"·çí·ã´·äñ ·å£·çã·å≠ ·ãú·àõ ·ã´·ãà·å£·àç"}];

// ---------------- Render Letters ----------------
function speakAmharic(text) {
  if (window.isSpeaking) return;
  window.isSpeaking = true;
  const audioUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=am&client=tw-ob`;
  const audio = new Audio(audioUrl);
  audio.play();
  audio.onended = () => { window.isSpeaking = false; };
  audio.onerror = () => { window.isSpeaking = false; console.error("Error playing TTS audio."); };
}

const lettersGrid = document.getElementById("lettersGrid");
lettersData.forEach(l => {
  const c = document.createElement("div");
  c.className = "card";
  c.innerHTML = `<div class="base-letter" data-letter="${l.base}">${l.base}</div>
  <div class="orders">${l.orders.map(o => `<div class="order" data-letter="${o}">${o}</div>`).join('')}</div>
  <div class="word" data-letter="${l.word}">${l.word}</div>
  <div class="sentence">${l.sentence}</div>`;
  c.addEventListener('click', (event) => {
    const targetLetter = event.target.dataset.letter;
    if (targetLetter) {
      speakAmharic(targetLetter);
    }
  });
  lettersGrid.appendChild(c);
});

// ---------------- Navigation (RESTORED) ----------------
document.querySelectorAll('nav button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.getElementById(btn.dataset.section).classList.add('active');
  });
});

// ---------------- Toggles (RESTORED) ----------------
document.getElementById("contrastBtn").addEventListener("click",()=>document.body.classList.toggle("high-contrast"));
document.getElementById("textBtn").addEventListener("click",()=>document.body.classList.toggle("large-text"));


// ---------------- Quiz (RESTORED & UPDATED) ----------------
const quizArea = document.getElementById("quizArea");
const emojiFeedback = document.getElementById("emojiFeedback");
let score = 0;

function generateQuiz(){
  const q = lettersData[Math.floor(Math.random()*lettersData.length)];
  quizArea.innerHTML=`<p>Click the letter for the word: <strong>${q.word}</strong></p>
  ${lettersData.map(l => `<button class="option-btn" data-letter="${l.base}" onclick="checkAnswer(this, '${q.base}', '${q.word}')">${l.base}</button>`).join('')}`;
}

function checkAnswer(btn, correctAnswer, word) {
  if (btn.dataset.letter === correctAnswer) {
    const cheerSound = new Audio('mp3.mp3'); // Using your local file
    cheerSound.volume = 0.7;
    cheerSound.addEventListener('ended', () => {
      speakAmharic(word);
    });
    cheerSound.play();
    btn.classList.add("correct");
    showFireworks();
    emojiFeedback.innerText="üéâ ·åé·â†·ãù!";
    score++;
    document.getElementById("score").innerText = score;
    const popup = document.getElementById('word-popup');
    popup.textContent = word;
    popup.classList.remove('hidden');
    setTimeout(() => {
        popup.classList.add('hidden');
    }, 6000);
    setTimeout(() => {
      emojiFeedback.innerText = "";
      generateQuiz();
    }, 7000);
  } else {
    const awwSound = new Audio('https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3');
    awwSound.volume = 0.5;
    awwSound.play();
    btn.classList.add("wrong");
    emojiFeedback.innerText = "‚ùå ·ä•·äï·ã∞·åà·äì ·àû·ä≠·à≠!";
    setTimeout(() => {
      btn.classList.remove("wrong");
      emojiFeedback.innerText = "";
    }, 3000);
  }
}

generateQuiz();

// ---------------- Fireworks (RESTORED) ----------------
const canvas=document.getElementById("effectsCanvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

function showFireworks(){
  for(let i=0;i<50;i++){
    const x=Math.random()*canvas.width;
    const y=Math.random()*canvas.height/2;
    ctx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
    ctx.beginPath();
    ctx.arc(x,y,Math.random()*8+2,0,Math.PI*2);
    ctx.fill();
  }
  setTimeout(()=>ctx.clearRect(0,0,canvas.width,canvas.height),500);
}
window.addEventListener('resize',()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});

// ---------------- Mini Games (UPDATED) ----------------
const gameArea = document.getElementById("gameArea");

function startMatchingGame() {
  gameArea.innerHTML = `<h3>üß† Find the Matching Letters!</h3><div class="memory-game-board" id="memory-board"></div><button class="game-btn" onclick="startMatchingGame()">Reset Game</button>`;
  const memoryBoard = document.getElementById('memory-board');
  const gameLetters = lettersData.map(l => l.base).sort(() => 0.5 - Math.random()).slice(0, 8);
  const cardSet = [...gameLetters, ...gameLetters];
  cardSet.sort(() => Math.random() - 0.5);
  let hasFlippedCard = false;
  let lockBoard = false;
  let firstCard, secondCard;
  cardSet.forEach(letter => {
    const card = document.createElement('div');
    card.classList.add('memory-card');
    card.dataset.letter = letter;
    card.innerHTML = `
      <div class="front-face"></div>
      <div class="back-face">${letter}</div>
    `;
    memoryBoard.appendChild(card);
    card.addEventListener('click', flipCard);
  });
  function flipCard() {
    if (lockBoard) return;
    if (this === firstCard) return;
    this.classList.add('flipped');
    speakAmharic(this.dataset.letter);
    if (!hasFlippedCard) {
      hasFlippedCard = true;
      firstCard = this;
      return;
    }
    secondCard = this;
    checkForMatch();
  }
  function checkForMatch() {
    let isMatch = firstCard.dataset.letter === secondCard.dataset.letter;
    isMatch ? disableCards() : unflipCards();
  }
  function disableCards() {
    firstCard.removeEventListener('click', flipCard);
    secondCard.removeEventListener('click', flipCard);
    showFireworks();
    resetBoard();
  }
  function unflipCards() {
    lockBoard = true;
    setTimeout(() => {
      firstCard.classList.remove('flipped');
      secondCard.classList.remove('flipped');
      resetBoard();
    }, 1200);
  }
  function resetBoard() {
      [hasFlippedCard, lockBoard] = [false, false];
      [firstCard, secondCard] = [null, null];
  }
}

function startTraceGame() {
    gameArea.innerHTML = `<h3>‚úçÔ∏è Trace the Letter</h3>
    <p>Click the letter to hear its sound.</p>
    <div style="font-size:60px;cursor:pointer;" onclick="speakAmharic('·àÄ')">·àÄ</div>`;
}
</script>
</body>
</html>